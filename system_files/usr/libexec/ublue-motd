#!/usr/bin/env -S bash

MOTD_TEMPLATE_FILE="${MOTD_TEMPLATE_FILE:-/usr/share/ublue-os/motd/template.md}"
. "${MOTD_ENV_SCRIPT:-/usr/share/ublue-os/motd/env.sh}"

if command -v tput >/dev/null 2>&1 && [[ -t 1 ]]; then
  cols=$(tput cols 2>/dev/null)
  envsubst <"${MOTD_TEMPLATE_FILE}" | glow -w "$cols" -
else
  envsubst <"${MOTD_TEMPLATE_FILE}" | glow -
fi